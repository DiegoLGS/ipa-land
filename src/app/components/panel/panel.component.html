<div class="bg-slate-200 p-8 overflow-auto mt-28 h-screen">
    <h2 class="text-2xl mb-4">Lista de cervezas cargadas</h2>

    <input type="password" placeholder="Ingresa la palabra de seguridad" class="my-1 block w-96 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" #securityWord (keyup)="setSecurityWord(securityWord.value)">    

    @if(beers.length) {

        <div class="relative overflow-auto">
            <div class="overflow-x-auto rounded-lg">
                <table class="min-w-full bg-white border mb-20">
                    <thead>
                        <tr class="bg-cyan-600 text-center text-xs md:text-sm font-thin text-white">
                            <th class="p-0">
                                <span class="block py-2 px-3 border-r border-gray-300">Nombre</span>
                            </th>
                            <th class="p-0">
                                <span class="block py-2 px-3 border-r border-gray-300">Tipo</span>
                            </th>
                            <th class="p-0">
                                <span class="block py-2 px-3 border-r border-gray-300">Alcohol</span>
                            </th>
                            <th class="p-0">
                                <span class="block py-2 px-3 border-r border-gray-300">IBU</span>
                            </th>
                            <th class="p-4 text-xs md:text-sm">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        @for(beer of beers; track beer._id) {
                            <tr class="border-b text-xs md:text-sm text-center text-gray-800">
                                <td class="p-2 md:p-4">{{beer.name}}</td>
                                <td class="p-2 md:p-4">{{beer.type}}</td>
                                <td class="p-2 md:p-4">{{beer.alcohol }}%</td>
                                <td class="p-2 md:p-4">{{beer.ibu}}</td>
                                <td class="relative p-2 md:p-4 flex justify-center space-x-2">
                                    <button class="bg-blue-500 hover:bg-blue-400 text-white px-3 py-1 rounded-md text-xs md:text-sm" (click)="this.editId = beer._id">Editar</button>
                                    <button class="bg-red-500 hover:bg-red-400 text-white px-3 py-1 rounded-md text-xs md:text-sm" (click)="openDeleteModal(beer)">Borrar</button>
                                </td>
                            </tr>                   
                        } 
                        </tbody>
                    </table>
                </div>
                <button class="text-xl text-white bg-green-600 hover:bg-green-500 px-3 py-1 rounded-md absolute bottom-0 right-20" (click)="this.editId = ''">Agregar nueva cerveza</button>
            </div>
        }

        @if(isModalOpen) {
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg p-6 w-96">
                    <h3 class="text-lg font-semibold mb-4">¿Estás seguro?</h3>
                    <p class="mb-4">Esta acción eliminará la cerveza '{{ beerToDelete!.name }}'. ¿Deseas continuar?</p>
                    <div class="flex justify-end space-x-4">
                        <button 
                        class="px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-md"
                        (click)="closeDeleteModal()">
                        Cancelar
                        </button>
                        <button 
                        class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md"
                        (click)="confirmDelete()">
                        Confirmar
                        </button>
                    </div>
                </div>
            </div>
        }

        <app-beer-form [editId]="editId" />
</div>
